# CG2_評価課題3

## その他及び、導入したシステム

### モデルデータを格納するストアを作成した
    モデルデータのディレクトリを指定して読み込むことで、ストアに格納され、ハンドルを取得できる。  
    ストア内では、リソースの設定とモデルハンドルの作成を行い、描画の手軽さを実現した。

### mtlファイル、またはマテリアルがないときの対応
    エンジンがあるかないかを判断し、なかった場合は自動で白い無地のテクスチャを貼りつけるようにした。

### 複数マテリアルのオブジェクトを張り付けられるようにした
    一つのオブジェクトに複数のメッシュとマテリアルが指定されていたとき、メッシュごとにマテリアルを張り付けられるようにした。

### UVトランスフォームの設定
    UVトランスフォームを可変長配列で渡すことで、複数マテリアルのUVトランスフォームを別々に動かせるようにした。  
    また、一つも可変長配列に入れなくても、操作はできないが描画はできるようにした。

### オーディオデータを格納するストアを作成した
    オーディオファイル(mp3)のディレクトリを指定して読み込むことで、ストアに格納され、ハンドルを取得できる。  
    ストア内では、オーディオデータ・サウンドハンドルの作成を行い、手軽に音楽を流せるようにした。

### ゲームパッドでの操作を有効にした
    XINPUTでゲームパッドを操作できるようにした。  
    Unityのキーの判定をイメージして、GetPress、GetTrriger、GetReleaseにボタンの番号をいれて判定を行う。  
    スティック操作では、エンジン内でのデッドゾーンを設け、操作していないのに、数値が取得できてしまう問題を対処した。

### キー・ボタンの見易さ修正
    キー・ボタンのIDを自作した列挙型に入れて、見やすい名前に変更した。


## カメラ操作

基本的にはデバッグカメラを操作して、モデルを見渡すことになる。  
操作はBlenderのカメラと同じである。 

### デバッグカメラの操作方法
- マウスホイール : ピボットに近づく
- マウスホイール押し込み + 移動 : ピボット中心に回転
- マウスホイール押し込み + 左Shift + 移動 : ピボットポイント移動

Releaseモードだとデバッグカメラが使えないので、ImGuiで操作することとなる。  
ピボットポイントの移動と回転のパラメータを操作して動かす。


## 球の描画

頂点データを計算して求めた。  
ImGuiでSRT、UVトランスフォーム、分割数の変更ができる。  
分割数のRingとSegmentはBlenderの調整項目を参考にした。

## LambertainReflection・HalfLambertでのライトの操作

ライトは、色、輝度、向きを操作できる。  


## 複数モデルの描画

球や平面、スプライト、といった様々なモデルを描画できる。  
モデルハンドルを作成したので、手軽に描画できる。  
ImGuiで全てのモデルのSRT、UVトランスフォームの変更が可能。  


## Sound

ImGuiでオーディオの再生と停止をできるようにした。


## Gamepad

ゲームコントローラで操作できるようにした。  
この課題では、Suzanneを操作できるようにした。

### 操作方法

左スティック : 移動  
LB・RB : 回転


## StanfordBunny・UtahTeapotの描画

ネットにあるobjの中身をコピーして描画した。  
そのまま描画しようとするとobjの中にUV座標系が含まれていなくてエラーが発生するため、Blender内で展開を行って作成した。  
mtlファイルは含まれていない。

## Suzanneの描画

Blenderの「メッシュを配置」でモンキーを選び、そのままobjファイルを作成した。  
mtlファイルは含まれていない。

## MultiMesh・MultiMaterialの描画
配布されたobjとmtlファイルを読み込んで描画した。  
MultiMesh、MultiMaterialのようなメッシュが複数あるモデルは、メッシュごとのUVトランスフォームを操作できる。 

## Lighting方式の変更

ImGuiのLightingOptionでLightingなし、LambertainReflection、HalfLambertを切り替えられるようにした。